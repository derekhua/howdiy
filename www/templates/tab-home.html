<style type="text/css" media="screen">
  .col {
    padding: 0px;
  }  

  .home-list-item {
    border-color: #ddd;
    background-color: #fff;
    color: #444;
    position: relative;
    z-index: 2;
    display: block;
    margin: -1px;
    padding: 16px;
    border-width: 1px;
    border-style: solid;
    font-size: 16px 
  }

  .home-list-item > .item {
    border-width: 0px;
  }
  
  .spinner svg {
    stroke: #E9523B;
    fill: #E9523B;
  }
</style>

<ion-view>
  
  <ion-nav-buttons side="left">
    <button class="button button-clear" ng-click="searchOff()">
      <i ng-class="searchFlag ? 'icon ion-arrow-left-c' : 'icon ion-erlenmeyer-flask light'"></i>
    </button> 
  </ion-nav-buttons>

  <ion-nav-title class="search-bar">
    <div class="bar item-input-inset-opaque search-bar">
      <label class="item-input-wrapper-opaque"  ng-click="searchOn()" style="background-color: rgb(90, 31, 22);">
        <i class="icon ion-ios-search-strong" style="color: #DDD"></i>
        <input type="search" placeholder="Howdiy?" autofocus="false" style="color: #DDD;"
        ng-model="query" ng-keyup="search(query)"/>
      </label>
    </div>
  </ion-nav-title>
  
  <ion-nav-buttons side="right">
    <button class="button button-clear" ng-click="searchOff()">
      <i class="icon ion-ios-gear"></i>
    </button> 
  </ion-nav-buttons>
  

  <ion-content scrollbar-x="false" scrollbar-y="false" overflow-scroll="false">
    <ion-refresher on-refresh="doRefresh()" pulling-icon="ion-beaker" spinner="crescent" class="assertive"></ion-refresher>
    
    <div ng-hide="searchFlag" class="list">
      <div class="home-list-item" ng-repeat="guide in guides" ng-click="goTo('guide', {guideId: guide._id})"> 
        <div class="item">
          <h2>{{guide.title}}</h2>
        </div>
        
        <div class="item item-avatar-left" ng-click="goTo('profile', {username: guide.author}); $event.stopPropagation();">
          <img src="{{guide.steps[0].picturePath}}">
          <h2>{{guide.author}}</h2>
        </div>

        <div class="item item-body">
          <p>
            {{guide.description}}
          </p>         
        </div>

        <div class="item item-icon-left assertive" href="#">
          <i class="icon ion-ios-heart-outline"></i>
          <span href="#" class="subdued">{{guide.meta.likes}} Likes</span>
          <ng-pluralize count="guide.comments.length"
            when="{'0': 'No comments',
              'one': '1 comment',
              'other': '{} comments'}">
          </ng-pluralize>
          <span href="#" class="subdued">{{guide.meta.shares}} Shares</span>
        </div>
      </div>
    </div>    

    <div ng-show="searchFlag" class="list">
      <a ng-repeat="result in searchResults" class="item item-thumbnail-left" 
      ng-click="goTo('guide', {guideId: '{{result._id}}'})">
        <img ng-src="{{result.image}}" alt="test" title="test" width="100%" class="thumbnailPic"/>
        <h2>{{result.title}} by {{result.author}}</h2>
        <p>{{result.description}}</p>
      </a>
    </div>
    
  </ion-content>
</ion-view>
